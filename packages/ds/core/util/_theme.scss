@mixin color-scheme($light, $dark, $all: ()) {
    @media(prefers-color-scheme: dark) {
        @include tokens-for-map($dark);
        &[theme=light] {
            @include tokens-for-map($light);
        }
    }
    @media(prefers-color-scheme: light) {
        @include tokens-for-map($light);
        &[theme=dark] {
            @include tokens-for-map($dark);
        }
    }
    @include tokens-for-map($all);
}

@mixin tokens-for-map($map) {
    @each $property, $token in $map {
        #{$property}: #{$token};
    }
}